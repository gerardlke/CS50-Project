8<!DOCTYPE html>

<html lang="en">
    <head>
        <!-- Metadata -->
        <meta charset="UTF-8">
        <meta name="description" content="Final Project">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Title -->
        <title>Meal Tracker</title>

        <!-- Styles -->
        <link href="/static/styles.css" rel="stylesheet">
        <script src="/static/script.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
        
        <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
        <script src="https://kit.fontawesome.com/8c32c945c3.js" crossorigin="anonymous"></script>
    </head>

    <body>
        <!-- Profile -->
        <div class="profile-card-background"></div>
        <div class="profile-card">
            <div class="close-profile-card">
                <p class="close-profile-card-X" onclick="closeProfileCard()">X</p>
            </div>
            <img alt="{{ user['filepath'] }}" src="/static/Chaewon.jpg" class="profile-icon">
            <h3 class="profile-name">{{ user["username"] }}</h3>
            {% if user["email"] %}
                <p class="profile-email">{{ user["email"] }}</p>
            {% else %}
                <p class="profile-email" onclick="editProfile()">Add email</p>
            {% endif %}
            <p class="profile-description-joined">Joined since {{ user["joined"] }}</p>
            <a class="profile-description-friends" href="/friends">{{ user["friends"] }} friend(s)</a>
            <div class="profile-description-buttons">
                <p class="edit-profile" onclick="editProfile()">Edit profile</p>
                <p class="profile-description-buttons-middle">|</p>
                <a class="logout" href="/logout">Log out</a>
            </div>
        </div>

        <form class="profile-card edit-profile-card" method="post" action="/edit_profile">
            <div class="close-profile-card">
                <p class="close-profile-card-X" onclick="closeProfileCard()">X</p>
            </div>
            <img alt="{{ user['filepath'] }}" src="/static/Chaewon.jpg" class="profile-icon">
            <input class="edit-profile-name edit-profile-input" name="edit-profile-name" placeholder="New Username" value="{{ user['username'] }}" required>
            <input class="edit-profile-email edit-profile-input" name="edit-profile-email" placeholder="New Email" value="{{ user['email'] }}" required>
            <input class="edit-profile-name edit-profile-input" name="edit-target-weight" placeholder="Target weight" value="{{ user['weight_goal'] }}" required>

            <div class="edit-profile edit-profile-target">
                <input class="edit-profile-input edit-profile-targets" name="edit-target-calories" placeholder="Calories" type="number" value="{{ user['calorie_goal'] }}" required>
                <input class="edit-profile-input edit-profile-targets" name="edit-target-carbs" placeholder="Carbs" type="number" value="{{ user['carbs_goal'] }}" required>
                <input class="edit-profile-input edit-profile-targets" name="edit-target-protein" placeholder="Protein" type="number" value="{{ user['protein_goal'] }}" required>
                <input class="edit-profile-input edit-profile-targets" name="edit-target-fats" placeholder="Fats" type="number" value="{{ user['fats_goal'] }}" required>
            </div>

            <div class="profile-description-buttons">
                <button class="btn edit-profile-btn" type="submit" onclick="editProfile()">Submit edits</button>
            </div>
        </form>

        {% block main %}{% endblock %}

        <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
        <script>AOS.init();</script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
        <script src="/static/script.js"></script>
        <script src="/static/eventListeners.js"></script>
    </body>
</html>
